{namespace rkwOrder=RKW\RkwOrder\ViewHelpers}
{namespace rkwRegistration=RKW\RkwRegistration\ViewHelpers}
<!-- ==================================================================== -->

<f:section name="productList">

	<ul class="order-list">

		<f:for each="{products}" as="product" iteration="productIterator">

			<li class="order-list__item">

				<figure class="order-list__image">
					<f:if condition="{product.image}" >
						<f:then>
							<f:cObject typoscriptObjectPath="plugin.tx_rkworder.libs.responsivePdfThumbnail" data="{product.image.uid}"/>
						</f:then>
						<f:else>
							<f:cObject typoscriptObjectPath="plugin.tx_rkworder.libs.responsivePdfThumbnail" data="EXT:rkw_order/Resources/Public/Images/publications-fallback.jpg"/>
						</f:else>
					</f:if>
				</figure>


				<div class="order-list__details">
					<h4 class="order-list__title">{product.title}</h4>
					<f:if condition="{product.subtitle}">
						<p class="order-list__subtitle">{product.subtitle}</p>
					</f:if>

					<f:if condition="{product.subscriptionOnly}">
						<f:then>
							<span class="checkbox">
								<label>
									<f:form.checkbox property="orderProduct.{productIterator.index}.product" value="{product}" />
									<span>
										<f:translate key="LLL:EXT:rkw_order/Resources/Private/Language/locallang.xlf:tx_rkworder_domain_model_product.subscription_only" />
									</span>
								</label>
							</span>

						</f:then>
						<f:else>

							<f:form.textfield id="txrkworder-amount-{product.uid}" property="orderProduct.{productIterator.index}.amount" class="feedback-field"/>
							<f:translate key="LLL:EXT:rkw_order/Resources/Private/Language/locallang.xlf:tx_rkworder_domain_model_orderproduct.amount" />

							<!-- add hidden field with product -->
							<f:form.hidden property="orderProduct.{productIterator.index}.product" value="{product}" />

						</f:else>

					</f:if>


				</div>

				<h3></h3>


			</li>
		</f:for>
	</ul>

</f:section>

<!-- ==================================================================== -->
<f:section name="termsSubmit">


	<!-- remark -->
	<f:comment>
		<div class="v320-1">
			<label for="tx-rkworder-remark" class="form-label">
				<f:translate key="LLL:EXT:rkw_order/Resources/Private/Language/locallang.xlf:tx_rkworder_domain_model_order.remark" />
			</label>
			<f:form.textarea id="tx-rkworder-remark" property="remark" />
		</div>
	</f:comment>

	<p class="v320-1">

		<f:security.ifAuthenticated>
			<f:else>
			<span class="checkbox">
				<label>
					<f:form.checkbox name="terms" value="1" />
					<span class="text-smaller">
						<f:link.page pageUid="{termsPid}" target="_blank">
							<f:translate key="LLL:EXT:rkw_order/Resources/Private/Language/locallang.xlf:partials_order_formFields_order.terms" />
						</f:link.page>
					</span>
				</label>
			</span>
			</f:else>
		</f:security.ifAuthenticated>
		<span class="checkbox">
			<label>
				<f:form.checkbox name="privacy" value="1" />
				<rkwRegistration:privacyText textVersion="order" />
			</label>
		</span>
	</p>
	<p class="v320-1">
		<button class="button" type="submit">
			<span><f:translate key="LLL:EXT:rkw_order/Resources/Private/Language/locallang.xlf:partials_order_formFields_order.order_button" /></span>
		</button>
	</p>
</f:section>
